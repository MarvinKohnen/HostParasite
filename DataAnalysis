using DataFrames
using Statistics
using Plots
using CSV 

# Read the CSV file into a DataFrame
df = DataFrame(CSV.File("dataParamscan.csv"))

# Group the data by copepod_infected_vel and infected_feeding_rate
grouped = groupby(df, [:copepod_infected_vel, :infected_feeding_rate])

# Calculate the mean for count_copepod, count_copepodInf, and count_grazer
result = combine(grouped, 
    :count_copepod => mean,
    :count_copepodInf => mean,
    :count_grazer => mean
)

# Rename the columns for clarity
rename!(result, [:copepod_infected_vel, :infected_feeding_rate, 
                 :mean_count_copepod, :mean_count_copepodInf,
                 :mean_count_grazer])

# Plot the means as bar plots
bar_plot = bar(result, 
    xaxis=([1:size(result, 1);], result[:, 1]),  # Set custom labels
    legend=:topright,
    title="Mean Values of count_copepod, count_copepodInf, and count_grazer",
    xlabel="Group",
    ylabel="Mean Value"
)

# Show the plot
display(bar_plot)
